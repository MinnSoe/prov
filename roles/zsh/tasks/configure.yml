---
- name: Create .zshrc file if it does not exist
  copy:
    content: ''
    force: false
    dest: '{{ ansible_env.HOME }}/.zshrc'
    owner: '{{ zsh_user }}'
    mode: 0644

- name: Ensure antigen is sourced in .zshrc
  lineinfile:
    path: '{{ ansible_env.HOME }}/.zshrc'
    line: 'source {{ zsh_antigen_path }}/antigen.zsh'

- name: Ensure antigen is applied in .zshrc after configuring
  lineinfile:
    path: '{{ ansible_env.HOME }}/.zshrc'
    insertafter: 'antigen'
    line: 'antigen apply'
